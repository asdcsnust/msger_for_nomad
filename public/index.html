<html>
<head>
    <style>
        #left-side {
            width: 900px;
            border: black solid 1px;
            float: left;
            position: relative;
            height: 630px;
        }
        #right-side {
            width: 250px;
            border: black solid 1px;
            float: left;
            position: relative;
            height: 630px;
        }
        #message_box {
            position: absolute;
            bottom:0px;
        }
        #message_box input {
            height: 100px;
        }
        h1 {
            font-size: 20pt;
        }
        #enter {
            float: right;
            height: 100px;
        }
        #msgs {
        	overflow: scroll;
        	height: 500px;
        }

    </style>
    <title>msger_for_nomad</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    

</head>
<body>
    <div id="left-side">
        <h1>
            msger_for_nomad
        </h1>
    </div>
    <div id="right-side">
        <b>
            Send message
        </b>
        
        <div id="msgs">
        </div>
        <p id="message_box">
            <span></span>
            <br/>
            <input type="text" id="msgbox"/>
            <button id="enter">
                입력
            </button>
        </p>
    </div>
    <script type="text/javascript">
        var input_nickname = prompt("닉네임을 입력하세요","");
        $("#message_box span").text(input_nickname);
        var socket = io.connect();
        $("#msgbox").keyup(function(event) {
            if (event.which == 13) {
                socket.emit('fromclient',{msg:input_nickname+":"+$('#msgbox').val()});
                $("#msgs").scrollTop($("#msgs")[0].scrollHeight);
                $('#msgbox').val('');
            }
        });
        $("#enter").click(function(){
            socket.emit('fromclient',{msg:input_nickname+":"+$('#msgbox').val()});
            $("#msgs").scrollTop($("#msgs")[0].scrollHeight);
            $('#msgbox').val('');
        });
        socket.on('toclient',function(data){
            console.log(data.msg);
            $('#msgs').append(data.msg+'<BR>');
        });
        $(document).ready(function() {
        });
    </script>
</body>
</html>
